import{_ as k,u as m,d as C,f as w,o as i,c as l,a as s,b as u,F as x,r as S,t as d,g as r,h as T,i as M,e as N}from"./main-DlHey3hF.js";const B={class:"modal-content history-modal"},H={class:"modal-body"},K={key:0,class:"empty-state"},$={key:1,class:"history-list"},V={class:"item-header"},I={class:"provider-badge"},L={class:"time"},z={class:"stats-row"},D={class:"stat valid",title:"æœ‰æ•ˆ"},F={class:"stat invalid",title:"æ— æ•ˆ/å…¶ä»–"},R={class:"actions"},j=["onClick"],E=["disabled","onClick"],O=["onClick"],P={class:"modal-footer"},Q=["disabled"],U={__name:"HistoryModal",setup(q){const e=m(),p=C(),n=w(),h=N(()=>e.activeModal==="history"),v=o=>new Date(o).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),_=o=>{p.tokensInput=o.tokensInput,o.provider&&(p.currentProvider=o.provider),e.closeModal(),e.showToast(`å·²åŠ è½½ ${o.providerName} çš„å†å²é…ç½®`,"success")},g=async o=>{if(!o||o.length===0){e.showToast("æ²¡æœ‰æœ‰æ•ˆçš„ Key å¯å¤åˆ¶","warning");return}try{await navigator.clipboard.writeText(o.join(`
`)),e.showToast(`å·²å¤åˆ¶ ${o.length} ä¸ªæœ‰æ•ˆ Key`,"success")}catch{e.showToast("å¤åˆ¶å¤±è´¥","error")}},b=o=>{n.deleteRecord(o)},f=async()=>{await e.showConfirmation("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚")&&(n.clearHistory(),e.showToast("å†å²è®°å½•å·²æ¸…ç©º","success"))},c=()=>{e.closeModal()};return(o,a)=>h.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:T(c,["self"])},[s("div",B,[s("div",{class:"modal-header"},[a[0]||(a[0]=s("h3",null,"æ£€æµ‹å†å²è®°å½•",-1)),s("button",{class:"close-btn",onClick:c},"Ã—")]),s("div",H,[u(n).history.length===0?(i(),l("div",K," æš‚æ— å†å²è®°å½• ")):(i(),l("div",$,[(i(!0),l(x,null,S(u(n).history,t=>(i(),l("div",{key:t.id,class:"history-item"},[s("div",V,[s("span",I,d(t.providerName),1),s("span",L,d(v(t.timestamp)),1)]),s("div",z,[s("span",D,[a[1]||(a[1]=s("span",{class:"dot"},null,-1)),r(" æœ‰æ•ˆ: "+d(t.stats.valid+t.stats.lowBalance),1)]),a[3]||(a[3]=s("span",{class:"divider"},"|",-1)),s("span",F,[a[2]||(a[2]=s("span",{class:"dot red"},null,-1)),r(" æ— æ•ˆ: "+d(t.stats.invalid+t.stats.noQuota+t.stats.zeroBalance+t.stats.rateLimit+t.stats.duplicate),1)])]),s("div",R,[s("button",{class:"btn-text primary",onClick:y=>_(t)},[...a[4]||(a[4]=[s("span",{class:"icon"},"â†º",-1),r(" é‡æ–°åŠ è½½ ",-1)])],8,j),s("button",{class:"btn-text",disabled:!t.validKeys||t.validKeys.length===0,onClick:y=>g(t.validKeys)},[a[5]||(a[5]=s("span",{class:"icon"},"ğŸ“‹",-1)),r(" å¤åˆ¶æœ‰æ•ˆ ("+d(t.validKeys?t.validKeys.length:0)+") ",1)],8,E),s("button",{class:"btn-text danger",onClick:y=>b(t.id)},[...a[6]||(a[6]=[s("span",{class:"icon"},"ğŸ—‘ï¸",-1),r(" åˆ é™¤ ",-1)])],8,O)])]))),128))]))]),s("div",P,[s("button",{class:"btn danger-outline",onClick:f,disabled:u(n).history.length===0}," æ¸…ç©ºå†å² ",8,Q),s("button",{class:"btn secondary",onClick:c},"å…³é—­")])])])):M("",!0)}},G=k(U,[["__scopeId","data-v-03abde58"]]);export{G as default};
